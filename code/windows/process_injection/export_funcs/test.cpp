#include "windows.h"

#define EXTERN_DLL_EXPORT extern "C" __declspec(dllexport)

BOOL APIENTRY DllMain(
    // Handle to DLL module
    HANDLE hModule,
    // Reason for calling function
    DWORD ul_reason_for_call,
    // Reserved
    LPVOID lpReserved
) {
    switch(ul_reason_for_call)
    {
        // A process is loading the DLL.
        case DLL_PROCESS_ATTACH:
        break;

        // A process is creating a new thread.
        case DLL_THREAD_ATTACH:
        break;

        // A thread exits normally.
        case DLL_THREAD_DETACH:
        break;

        // A process unloads the DLL.
        case DLL_PROCESS_DETACH:
        break;
    }

    // if it returns False and the DLL is dynamically linked at load-time
    //      the program will fail
    return TRUE;
}

// exported function
EXTERN_DLL_EXPORT int testFunc() {
    return 42;
}